{"version":3,"sources":["webpack:///webpack/bootstrap dcdb3af204c211ba9d8f","webpack:///./public/js/main.js","webpack:///./public/js/Camera.js"],"names":["camera","start","HEIGHT","WIDTH","Camera","_video","_canvas","_context","_photo","_startbutton","_width","_height","_isStreaming","document","getElementById","createElement","getContext","onStream","stream","navigator","mozGetUserMedia","mozSrcObject","vendorURL","window","URL","webkitURL","src","createObjectURL","play","onError","err","console","log","options","video","audio","mediaDevices","getUserMedia","then","catch","getMedia","webkitGetUserMedia","msGetUserMedia","addEventListener","videoHeight","videoWidth","isNaN","setAttribute","ev","_takePicture","preventDefault","_clearPhoto","width","height","drawImage","toDataURL"],"mappings":"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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap dcdb3af204c211ba9d8f","import Camera from \"./Camera\";\n\nlet camera = new Camera();\ncamera.start();\n\n\n// WEBPACK FOOTER //\n// ./public/js/main.js","const HEIGHT = 0;\nconst WIDTH = 320;\n\nclass Camera {\n\tconstructor() {\n\t\tthis._video = null;\n\t\tthis._canvas = null;\n\t\tthis._context = null;\n\t\tthis._photo = null;\n\t\tthis._startbutton = null;\n\n\t\tthis._width = WIDTH;\n\t\tthis._height = HEIGHT;\n\t\tthis._isStreaming = false;\n\n\t}\n\n\tstart() {\n\t\tthis._video = document.getElementById( 'video' );\n\t\tthis._canvas = document.createElement( 'canvas' );\n\t\tthis._context = this._canvas.getContext( '2d' );\n\t\tthis._photo = document.getElementById( 'photo' );\n\t\tthis._startbutton = document.getElementById( 'startbutton' );\n\n\t\tlet onStream = ( stream ) => {\n\t\t\tif ( navigator.mozGetUserMedia ) {\n\t\t\t\tthis._video.mozSrcObject = stream;\n\t\t\t} else {\n\t\t\t\tvar vendorURL = window.URL || window.webkitURL;\n\t\t\t\tthis._video.src = vendorURL.createObjectURL( stream );\n\t\t\t}\n\t\t\tthis._video.play();\n\t\t};\n\t\tlet onError = ( err ) => console.log( \"An error occured! \" + err );\n\t\tlet options = { video: true, audio: false };\n\n\t\tif ( navigator.mediaDevices && navigator.mediaDevices.getUserMedia ){\n\t\t\tnavigator.mediaDevices.getUserMedia( options ).then( onStream ).catch( onError );\n\t\t} else {\n\t\t\tnavigator.getMedia = ( navigator.getUserMedia || navigator.webkitGetUserMedia ||\n\t\t\tnavigator.mozGetUserMedia || navigator.msGetUserMedia );\n\t\t\tnavigator.getMedia( options, onStream, onError );\n\t\t}\n\n\t\tthis._video.addEventListener( 'canplay', () => {\n\t\t\tif ( !this._isStreaming ) {\n\t\t\t\tthis._height = this._video.videoHeight / ( this._video.videoWidth / this._width );\n\n\t\t\t\t// Firefox currently has a bug where the height can't be read from\n\t\t\t\t// the video, so we will make assumptions if this happens.\n\n\t\t\t\tif ( isNaN( this._height ) ) {\n\t\t\t\t\tthis._height = this._width / ( 4 / 3 );\n\t\t\t\t}\n\n\t\t\t\tthis._video.setAttribute( 'width', this._width );\n\t\t\t\tthis._video.setAttribute( 'height', this._height );\n\t\t\t\tthis._canvas.setAttribute( 'width', this._width );\n\t\t\t\tthis._canvas.setAttribute( 'height', this._height );\n\t\t\t\tthis._isStreaming = true;\n\t\t\t}\n\t\t}, false );\n\n\t\tthis._startbutton.addEventListener( 'click', ( ev ) => {\n\t\t\tthis._takePicture();\n\t\t\tev.preventDefault();\n\t\t}, false );\n\n\t\tthis._clearPhoto();\n\t}\n\n\tisStreaming() {\n\t\treturn this._isStreaming;\n\t}\n\n\t_clearPhoto() {\n\t\tthis._photo.setAttribute( 'src', '' );\n\t}\n\n\t_takePicture() {\n\t\tif ( this._width && this._height ) {\n\t\t\tthis._canvas.width = this._width;\n\t\t\tthis._canvas.height = this._height;\n\t\t\tthis._context.drawImage( this._video, 0, 0, this._width, this._height );\n\t\t\tthis._photo.setAttribute( 'src', this._canvas.toDataURL() );\n\t\t} else {\n\t\t\tthis._clearPhoto();\n\t\t}\n\t}\n}\n\nexport default Camera;\n\n\n\n// WEBPACK FOOTER //\n// ./public/js/Camera.js"],"sourceRoot":""}