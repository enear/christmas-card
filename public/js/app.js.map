{"version":3,"sources":["webpack:///webpack/bootstrap 2190468da6d860f0df97","webpack:///./public/js/main.js","webpack:///./public/js/Camera.js","webpack:///./public/js/FaceEmotion.js"],"names":["app","start","camera","_checkEmotionButton","document","getElementById","addEventListener","ev","preventDefault","checkEmotion","getImage","HEIGHT","WIDTH","Camera","_video","_canvas","_context","_photo","_image","_startbutton","_width","_height","_isStreaming","createElement","getContext","onStream","stream","navigator","mozGetUserMedia","mozSrcObject","vendorURL","window","URL","webkitURL","src","createObjectURL","play","onError","err","console","log","options","video","audio","mediaDevices","getUserMedia","then","catch","getMedia","webkitGetUserMedia","msGetUserMedia","videoHeight","videoWidth","isNaN","setAttribute","_takePicture","_clearPhoto","width","height","drawImage","url","toDataURL","Image","NO_IMAGE_RESPONSE","success","message","REQ_OPTIONS","method","headers","Headers","mode","cache","FaceEmotion","_currentImage","image","formData","FormData","append","size","body","fetch","res"],"mappings":"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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2190468da6d860f0df97","import Camera from \"./Camera\";\nimport faceEmotion from \"./FaceEmotion\";\n\nlet app = {\n\tstart(){\n\t\tthis.camera = new Camera();\n\t\tthis.camera.start();\n\n\t\tthis._checkEmotionButton = document.getElementById( 'checkEmotionButton' );\n\t\tthis._checkEmotionButton.addEventListener( 'click', (ev) => {\n\t\t\tev.preventDefault();\n\t\t\tfaceEmotion.checkEmotion( this.camera.getImage() );\n\t\t})\n\t}\n};\n\napp.start();\n\n\n// WEBPACK FOOTER //\n// ./public/js/main.js","const HEIGHT = 0;\nconst WIDTH = 320;\n\nclass Camera {\n\tconstructor() {\n\t\tthis._video = null;\n\t\tthis._canvas = null;\n\t\tthis._context = null;\n\t\tthis._photo = null;\n\t\tthis._image = null;\n\t\tthis._startbutton = null;\n\n\t\tthis._width = WIDTH;\n\t\tthis._height = HEIGHT;\n\t\tthis._isStreaming = false;\n\t}\n\n\tstart() {\n\t\tthis._video = document.getElementById( 'video' );\n\t\tthis._canvas = document.createElement( 'canvas' );\n\t\tthis._context = this._canvas.getContext( '2d' );\n\t\tthis._photo = document.getElementById( 'photo' );\n\t\tthis._startbutton = document.getElementById( 'startbutton' );\n\n\t\tlet onStream = ( stream ) => {\n\t\t\tif ( navigator.mozGetUserMedia ) {\n\t\t\t\tthis._video.mozSrcObject = stream;\n\t\t\t} else {\n\t\t\t\tvar vendorURL = window.URL || window.webkitURL;\n\t\t\t\tthis._video.src = vendorURL.createObjectURL( stream );\n\t\t\t}\n\t\t\tthis._video.play();\n\t\t};\n\t\tlet onError = ( err ) => console.log( \"An error occured! \" + err );\n\t\tlet options = { video: true, audio: false };\n\n\t\tif ( navigator.mediaDevices && navigator.mediaDevices.getUserMedia ){\n\t\t\tnavigator.mediaDevices.getUserMedia( options ).then( onStream ).catch( onError );\n\t\t} else {\n\t\t\tnavigator.getMedia = ( navigator.getUserMedia || navigator.webkitGetUserMedia ||\n\t\t\tnavigator.mozGetUserMedia || navigator.msGetUserMedia );\n\t\t\tnavigator.getMedia( options, onStream, onError );\n\t\t}\n\n\t\tthis._video.addEventListener( 'canplay', () => {\n\t\t\tif ( !this._isStreaming ) {\n\t\t\t\tthis._height = this._video.videoHeight / ( this._video.videoWidth / this._width );\n\n\t\t\t\t// Firefox currently has a bug where the height can't be read from\n\t\t\t\t// the video, so we will make assumptions if this happens.\n\n\t\t\t\tif ( isNaN( this._height ) ) {\n\t\t\t\t\tthis._height = this._width / ( 4 / 3 );\n\t\t\t\t}\n\n\t\t\t\tthis._video.setAttribute( 'width', this._width );\n\t\t\t\tthis._video.setAttribute( 'height', this._height );\n\t\t\t\tthis._canvas.setAttribute( 'width', this._width );\n\t\t\t\tthis._canvas.setAttribute( 'height', this._height );\n\t\t\t\tthis._isStreaming = true;\n\t\t\t}\n\t\t}, false );\n\n\t\tthis._startbutton.addEventListener( 'click', ( ev ) => {\n\t\t\tthis._takePicture();\n\t\t\tev.preventDefault();\n\t\t}, false );\n\n\t\tthis._clearPhoto();\n\t}\n\n\tisStreaming() {\n\t\treturn this._isStreaming;\n\t}\n\n\tgetImage(){\n\t\treturn this._image;\n\t}\n\n\t_clearPhoto() {\n\t\tthis._photo.setAttribute( 'src', '' );\n\t\tthis._image = null;\n\t}\n\n\t_takePicture() {\n\t\tif ( this._width && this._height ) {\n\t\t\tthis._canvas.width = this._width;\n\t\t\tthis._canvas.height = this._height;\n\t\t\tthis._context.drawImage( this._video, 0, 0, this._width, this._height );\n\n\t\t\tlet url = this._canvas.toDataURL();\n\n\t\t\tthis._image = new Image();\n\t\t\tthis._image.src = url;\n\n\t\t\tthis._photo.setAttribute( 'src', url );\n\t\t} else {\n\t\t\tthis._clearPhoto();\n\t\t}\n\t}\n}\n\nexport default Camera;\n\n\n\n// WEBPACK FOOTER //\n// ./public/js/Camera.js","const URL = '/checkEmotion';\nconst NO_IMAGE_RESPONSE = { success: false, message: \"No image sent\" };\nconst REQ_OPTIONS = {\n\tmethod: 'POST',\n\theaders: new Headers(),\n\tmode: 'cors',\n\tcache: 'default'\n};\n\nclass FaceEmotion {\n\n\tconstructor() {\n\t\tthis._currentImage = null;\n\t}\n\tcheckEmotion( image ) {\n\t\tif ( image ) {\n\t\t\tlet options = { ...REQ_OPTIONS };\n\t\t\tlet formData = new FormData();\n\t\t\tformData.append( 'image', image.src );\n\t\t\toptions.headers.append( \"Content-Length\", image.size );\n\t\t\toptions.body = formData;\n\t\t\tconsole.log(options);\n\t\t\tfetch( URL, options ).then( res => console.log( res ) );\n\n\t\t} else {\n\t\t\treturn NO_IMAGE_RESPONSE;\n\t\t}\n\t}\n}\n\nexport default new FaceEmotion;\n\n\n// WEBPACK FOOTER //\n// ./public/js/FaceEmotion.js"],"sourceRoot":""}